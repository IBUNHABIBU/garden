<!-- app/views/shared/_hero_carousel.html.erb -->
<section class="relative w-full max-w-6xl mx-auto overflow-hidden rounded-2xl shadow-lg" aria-roledescription="carousel">
  <% if hero.present? && hero.images.attached? %>
    <div id="heroCarousel" class="flex transition-transform duration-700 ease-in-out" data-controller="carousel" data-carousel-autoplay-interval-value="3000">
      <% hero.images.each_with_index do |img, i| %>
        <div class="w-full flex-shrink-0" style="width: <%= 100.0 / hero.images.count %>%">
          <div class="relative h-64 sm:h-72 md:h-96 lg:h-[520px]">
            <%= image_tag img, alt: "Slide \#{i + 1}", class: "w-full h-full object-cover block" %>
            <% if i == 0 %>
              <div class="absolute inset-0 flex items-center justify-center">
                <div class="bg-black/40 backdrop-blur-sm rounded-xl p-6 max-w-xl text-center">
                  <h2 class="text-3xl sm:text-4xl font-extrabold text-white"><%= hero.title %></h2>
                  <p class="mt-2 text-sm sm:text-base text-white/90"><%= hero.description %></p>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- Left / Right Arrows -->
    <button data-action="carousel#prev" aria-label="Previous slide" class="absolute left-3 top-1/2 -translate-y-1/2 z-20 rounded-full bg-white/80 hover:bg-white p-2 shadow-md">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <button data-action="carousel#next" aria-label="Next slide" class="absolute right-3 top-1/2 -translate-y-1/2 z-20 rounded-full bg-white/80 hover:bg-white p-2 shadow-md">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>

    <!-- Dots -->
    <div class="absolute left-1/2 -translate-x-1/2 bottom-4 z-20 flex gap-2">
      <% hero.images.each_with_index do |_, i| %>
        <button data-action="carousel#goTo" data-carousel-index-value="<%= i %>" aria-label="Go to slide <%= i + 1 %>" class="w-2.5 h-2.5 rounded-full transition-all duration-200 bg-white/40"></button>
      <% end %>
    </div>
  <% end %>
</section>
